<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Jimmy Chavez, REALTOR® | Future Realty Idaho</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <!-- Header -->
  <header>
    <h1>Jimmy Chavez, REALTOR®</h1>
    <p>Future Realty Idaho</p>
    <nav>
      <a href="index.html">Home</a>
      <a href="about.html">About</a>
      <a href="contact.html">Contact</a>
    </nav>
  </header>

  <!-- Hero Section -->
  <section class="hero">
    <img src="images/Headshot.jpeg" alt="Jimmy Chavez Realtor" />
    <div class="hero-text">
      <h1>Your Idaho Real Estate Partner</h1>
      <p>
        Helping families and investors find their dream homes and properties in Coeur d’Alene, Hayden, Rathdrum, and beyond.
      </p>
    </div>
  </section>

  <!-- Weather Section -->
  <section id="weather" class="weather-section">
    <h2>7-Day Weather Forecast for Coeur d’Alene, ID</h2>
    <div id="weather-container" class="weather-container">
      <p>Loading forecast...</p>
    </div>
  </section>

  <!-- Contact Form -->
  <section class="contact-form">
    <h2>Contact Jimmy</h2>
    <p>Have a question about buying or selling a home? Let’s connect.</p>

    <form action="https://formspree.io/f/mvgwqwka" method="POST">
      <label for="name">Name</label>
      <input type="text" name="name" id="name" placeholder="Your Name" required />

      <label for="email">Email</label>
      <input type="email" name="email" id="email" placeholder="Your Email" required />

      <label for="message">Message</label>
      <textarea name="message" id="message" placeholder="Your Message" rows="5" required></textarea>

      <input type="hidden" name="_next" value="thankyou.html" />
      <button type="submit">Send Message</button>
    </form>
  </section>

  <!-- Footer -->
  <footer>
    <div class="footer-content">
      <p>© 2025 Jimmy Chavez, REALTOR® — Future Realty Idaho</p>
      <img src="images/future-realty-idaho-logo.png" alt="Future Realty Idaho Logo" class="broker-logo" />
      <p class="built-with">Built with ❤️ using GitHub Pages</p>
    </div>
  </footer>

  <!-- Weather Script -->
  <script>
(async function() {
  // === Config: change coordinates if you want a different city ===
  const LAT = 47.6777;    // Coeur d'Alene
  const LON = -116.7805;

  // Request 7 days and Fahrenheit explicitly
  const apiUrl = `https://api.open-meteo.com/v1/forecast?latitude=${LAT}&longitude=${LON}` +
                 `&daily=weathercode,temperature_2m_max,temperature_2m_min,precipitation_probability_max` +
                 `&timezone=America/Los_Angeles&temperature_unit=fahrenheit&forecast_days=7`;

  const container = document.getElementById('weather-container');
  if (!container) {
    console.warn('No element with id="weather-container" found.');
    return;
  }

  container.innerHTML = '<p>Loading forecast…</p>';

  try {
    const res = await fetch(apiUrl);
    if (!res.ok) throw new Error(`Weather API error: ${res.status} ${res.statusText}`);
    const data = await res.json();

    // safe access
    const days = data?.daily?.time ?? [];
    const highs = data?.daily?.temperature_2m_max ?? [];
    const lows = data?.daily?.temperature_2m_min ?? [];
    const rain = data?.daily?.precipitation_probability_max ?? [];
    const codes = data?.daily?.weathercode ?? [];

    if (!days.length) {
      container.innerHTML = '<p>Forecast unavailable right now. Please try again later.</p>';
      return;
    }

    // weather code → emoji/icon map (expanded)
    const icons = {
      0: "☀️", 1: "🌤️", 2: "⛅", 3: "☁️",
      45: "🌫️", 48: "🌫️",
      51: "🌦️", 53: "🌦️", 55: "🌧️",
      56: "🌧️", 57: "🌧️",
      61: "🌧️", 63: "🌧️", 65: "🌧️",
      66: "🌧️", 67: "🌧️",
      71: "🌨️", 73: "🌨️", 75: "❄️",
      80: "🌦️", 81: "🌧️", 82: "🌧️",
      85: "🌨️", 86: "🌨️",
      95: "⛈️", 96: "⛈️", 99: "⛈️"
    };

    container.innerHTML = ''; // clear

    // Optional: show last updated time
    const updated = document.createElement('div');
    updated.className = 'weather-updated';
    updated.textContent = 'Last updated: ' + new Date().toLocaleString();
    container.appendChild(updated);

    // Create day cards
    for (let i = 0; i < days.length; i++) {
      const dateStr = new Date(days[i]).toLocaleDateString('en-US', {
        weekday: 'short', month: 'short', day: 'numeric'
      });

      const high = (highs[i] !== undefined) ? Math.round(highs[i]) + '°F' : '—';
      const low  = (lows[i]  !== undefined) ? Math.round(lows[i])  + '°F' : '—';
      const rainPct = (rain[i] !== undefined) ? Math.round(rain[i]) + '%' : '—';
      const icon = icons[codes[i]] || '🌡️';

      const card = document.createElement('div');
      card.className = 'day-card';
      card.innerHTML = `
        <h3>${dateStr}</h3>
        <div class="weather-icon" aria-hidden="true">${icon}</div>
        <p class="temp-high">High: ${high}</p>
        <p class="temp-low">Low: ${low}</p>
        <p class="rain-chance">Rain: ${rainPct}</p>
      `;
      container.appendChild(card);
    }
  } catch (err) {
    console.error(err);
    container.innerHTML = '<p>Unable to load forecast. Please check your internet connection or try again later.</p>';
  }
})();
</script>

</body>
</html>
